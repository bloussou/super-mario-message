<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>super mario message</title>
  <script src="../deps/jquery-3.3.1.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      width: 500px;
      margin: auto;
    }
  </style>
</head>

<body>
  <h1>SMM</h1>
  <small class="form-text text-muted">super-mario-message</small>
  <hr/>
  <div class="form-group">
    <textarea class="form-control message" rows="4" cols="80" placeholder="Enter your message here"></textarea>
  </div>
  <button class="go btn btn-primary">Generate link</button>
  <div class="resultContainer" style="display:none;">
    <hr/>
    <div class="form-group">
      <label>Generated link:</label>
      <br/>
      <a class="result" target="_blank"></a>
    </div>
  </div>
</body>
<script>
  $(function() {

    var params = window.location.search.substring(1);

    if (params.length > 3) {
      var url = window.location.href;
      url = url.substring(0, url.lastIndexOf("/"));
      window.location.href = url + "/game.html?" + params;
    }

    $(".go").click(function() {
      var message = $(".message").val();
      var encodedData = window.btoa(message);

      var url = window.location.href;
      url = url.substring(0, url.lastIndexOf("/"));

      $(".result").text(url + "/?" + encodedData);
      $(".result").attr("href", url + "/?" + encodedData);
      $(".resultContainer").show();

    });
  });
</script>

</html>
